-- ==========================================
-- The KreOS 3.0 Skylark Application Settings
-- Written by kornichen
-- Lastly modified on 2nd April 2015
-- Licensed under General Public License V3
-- ==========================================

os.loadAPI("/system/apis/skylark")

local args = { ... }

if args[1] ~= "settings" then
	error("This has to be started from KreOS.")
end

local pages, buttons, inputboxes, labels, checkboxes, scrollbars, images, render, action = skylark.init()
local w, h = term.getSize()

pages:create("config_applications", "Application Settings", true, colors.white, true)

buttons:create("btnCfgApplicationsSettings", "config_applications", true, 2, 2, "Settings", colors.cyan, colors.gray, function()
	pages:disable("config_applications")
	error()
end)

buttons:create("btnAddApplication", "config_applications", true, 2, 5, "Add application", colors.black, colors.lightGray, function()
	pages:disable("config_applications")
	shell.run("/system/config_addApplication", "config_applications")
	pages:enable("config_applications")
end)
labels:create("lbAddApplication", "config_applications", true, 2, 7, "Add an application to the drawer.", colors.black, colors.white)
labels:create("lbAddApplication2", "config_applications", true, 2, 8, "Please copy it to /applications first.", colors.black, colors.white)
buttons:create("btnDeleteApplication", "config_applications", true, 2, 10, "Delete application", colors.black, colors.lightGray, function()
	pages:disable("config_applications")
	shell.run("/system/config_deleteApplication", "config_applications")
	pages:enable("config_applications")
end)
labels:create("lbDeleteApplication", "config_applications", true, 2, 12, "Delete an application from the drawer. It will", colors.black, colors.white)
labels:create("lbDeleteApplication2", "config_applications", true, 2, 13, "be automatically deleted from /applications (!)", colors.black, colors.white)
labels:create("lbDeleteApplication3", "config_applications", true, 2, 14, "If needed make a backup before deleting.", colors.black, colors.white)
buttons:create("btnEditApplications", "config_applications", true, 2, 16, "Edit applications", colors.black, colors.lightGray, function()
	pages:disable("config_applications")
	shell.run("/system/config_editApplications", "config_applications")
	pages:enable("config_applications")
end)
labels:create("lbEditApplications", "config_applications", true, 2, 18, "Edit installed applications.", colors.black, colors.white)

while true do
	render:all(pages, buttons, inputboxes, labels, checkboxes, images)
	action:pullEvent(pages, buttons, inputboxes, checkboxes, images)
end